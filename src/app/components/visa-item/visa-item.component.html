<div class="visa-item">
  <p>Employee: {{ visa.appId.firstName }} {{ visa.appId.lastName }}</p>
  <p>Step: {{ visa.step }}</p>
  <div *ngIf="visa.OPTReceipt.status !== 'unuploaded'">
    <p>OPTReceipt:</p>
    <p>status: {{ visa.OPTReceipt.status }}</p>
    <p>document:</p>
    <a mat-button [href]="visa.OPTReceipt.document" target="_blank"
      >open document</a
    >
    <p *ngIf="visa.OPTReceipt.status === 'rejected'">
      feedback: {{ visa.OPTReceipt.feedback }}
    </p>
    <app-feedback-form
      [id]="visa._id"
      [handleSubmit]="handleSubmit"
      *ngIf="visa.OPTReceipt.status === 'pending'"
    ></app-feedback-form>
    <button
      (click)="handleSendNoti()"
      mat-raised-button
      color="primary"
      *ngIf="
        visa.OPTEAD.status === 'unuploaded' &&
        visa.OPTReceipt.status === 'approved'
      "
    >
      send notification for submitting OPTEAD form
    </button>
    <p *ngIf="notiSent === true">Notification sent</p>
  </div>
  <div *ngIf="visa.OPTEAD.status !== 'unuploaded'">
    <p>OPTEAD:</p>
    <p>status: {{ visa.OPTEAD.status }}</p>
    <p>document:</p>
    <a mat-button [href]="visa.OPTEAD.document" target="_blank"
      >open document</a
    >
    <p *ngIf="visa.OPTEAD.status === 'rejected'">
      feedback: {{ visa.OPTEAD.feedback }}
    </p>
    <app-feedback-form
      [id]="visa._id"
      [handleSubmit]="handleSubmit"
      *ngIf="visa.OPTEAD.status === 'pending'"
    ></app-feedback-form>
    <button
      (click)="handleSendNoti()"
      mat-raised-button
      color="primary"
      *ngIf="
        visa.I983.status === 'unuploaded' && visa.OPTEAD.status === 'approved'
      "
    >
      send notification for submitting I983 form
    </button>
    <p *ngIf="notiSent === true">Notification sent</p>
  </div>
  <div *ngIf="visa.I983.status !== 'unuploaded'">
    <p>I983:</p>
    <p>status: {{ visa.I983.status }}</p>
    <p>document:</p>
    <a mat-button [href]="visa.I983.document" target="_blank">open document</a>
    <p *ngIf="visa.I983.status === 'rejected'">
      feedback: {{ visa.I983.feedback }}
    </p>
    <app-feedback-form
      [id]="visa._id"
      [handleSubmit]="handleSubmit"
      *ngIf="visa.I983.status === 'pending'"
    ></app-feedback-form>
    <button
      (click)="handleSendNoti()"
      mat-raised-button
      color="primary"
      *ngIf="
        visa.I20.status === 'unuploaded' && visa.I983.status === 'approved'
      "
    >
      send notification for submitting I20 form
    </button>
    <p *ngIf="notiSent === true">Notification sent</p>
  </div>
  <div *ngIf="visa.I20.status !== 'unuploaded'">
    <p>I20:</p>
    <p>status: {{ visa.I20.status }}</p>
    <p>document:</p>
    <a mat-button [href]="visa.I20.document" target="_blank">open document</a>
    <p *ngIf="visa.I20.status === 'rejected'">
      feedback: {{ visa.I20.feedback }}
    </p>
    <app-feedback-form
      [id]="visa._id"
      [handleSubmit]="handleSubmit"
      *ngIf="visa.I20.status === 'pending'"
    ></app-feedback-form>
  </div>
  <hr />
</div>
